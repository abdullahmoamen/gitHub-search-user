{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdullah\\\\Desktop\\\\GitHub-search-app\\\\starter-project-react-github-search-users-master\\\\src\\\\context\\\\context.js\";\nimport React, { useState, useEffect, createContext } from 'react';\nimport mockUser from './mockData.js/mockUser';\nimport mockRepos from './mockData.js/mockRepos';\nimport mockFollowers from './mockData.js/mockFollowers';\nimport axios from 'axios';\nconst rootUrl = 'https://api.github.com';\nconst GithubContext = createContext();\n\nconst GithubProvider = ({\n  children\n}) => {\n  const [gitHubUser, setGithubUser] = useState(mockUser);\n  const [repos, setRepos] = useState(mockRepos);\n  const [followers, setFollowers] = useState(mockFollowers); //request loading\n\n  const [requests, setRequests] = useState(0);\n  const [isLoading, setIsLoading] = useState(false); //! ERRORS\n\n  const [error, setError] = useState({\n    show: false,\n    msg: ''\n  }); //TODO serach GithubUser\n\n  const searchGithubUser = async user => {\n    toggleError();\n    setIsLoading(true);\n    const response = await axios(`${rootUrl}/users/${user}`).catch(error => {});\n\n    if (response) {\n      setGithubUser(response.data);\n      const {\n        login,\n        followers_url\n      } = response.data;\n      await Promise.allSettled([axios(`${rootUrl}/users/${login}/repos?per_page=100`), axios(`${followers_url}?per_page=100`)]).then; //repos\n    } else {\n      toggleError(true, \"there is no user matching this username\");\n    }\n\n    checkRequests();\n    setIsLoading(false);\n  }; // check rate\n\n\n  const checkRequests = () => {\n    axios(`${rootUrl}/rate_limit`).then(({\n      data\n    }) => {\n      let {\n        rate: {\n          remaining\n        }\n      } = data;\n      setRequests(remaining);\n\n      if (remaining === 0) {\n        toggleError(true, 'Sorry, You have exceeded your hourly rate limit !!');\n      }\n    }).catch(err => {});\n  };\n\n  function toggleError(show = false, msg = '') {\n    setError({\n      show,\n      msg\n    });\n  }\n\n  ;\n  useEffect(checkRequests, []);\n  return /*#__PURE__*/React.createElement(GithubContext.Provider, {\n    value: {\n      gitHubUser,\n      searchGithubUser,\n      repos,\n      followers,\n      requests,\n      error,\n      isLoading\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, children);\n};\n\nexport { GithubProvider, GithubContext };","map":{"version":3,"sources":["C:/Users/Abdullah/Desktop/GitHub-search-app/starter-project-react-github-search-users-master/src/context/context.js"],"names":["React","useState","useEffect","createContext","mockUser","mockRepos","mockFollowers","axios","rootUrl","GithubContext","GithubProvider","children","gitHubUser","setGithubUser","repos","setRepos","followers","setFollowers","requests","setRequests","isLoading","setIsLoading","error","setError","show","msg","searchGithubUser","user","toggleError","response","catch","data","login","followers_url","Promise","allSettled","then","checkRequests","rate","remaining","err"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createContext} from 'react';\nimport mockUser from './mockData.js/mockUser';\nimport mockRepos from './mockData.js/mockRepos';\nimport mockFollowers from './mockData.js/mockFollowers';\nimport axios from 'axios';\n\nconst rootUrl = 'https://api.github.com';\n\nconst GithubContext =createContext();\n\nconst GithubProvider =({children})=>{\n    const [gitHubUser,setGithubUser]=useState(mockUser);\n    const [repos,setRepos]=useState(mockRepos);\n    const [followers,setFollowers]=useState(mockFollowers);\n\n    //request loading\n    const [requests,setRequests]=useState(0);\n    const [isLoading,setIsLoading]=useState(false);\n\n    //! ERRORS\n    const [error,setError]=useState({show:false,msg:''})\n\n    //TODO serach GithubUser\n    const searchGithubUser =async(user)=>{\n        toggleError();\n        setIsLoading(true);\n\n        const response = await axios(`${rootUrl}/users/${user}`)\n        .catch(error=>{\n\n        })\n        if (response){\n            setGithubUser(response.data);\n            const {login,followers_url}=response.data;\n\n            await Promise.allSettled([axios(`${rootUrl}/users/${login}/repos?per_page=100`),\n            axios(`${followers_url}?per_page=100`)]).then\n\n            //repos\n        }else{\n            toggleError(true,\"there is no user matching this username\")}\n            checkRequests();\n            setIsLoading(false);\n        }\n\n    \n    // check rate\n    const checkRequests=()=>{\n        axios(`${rootUrl}/rate_limit`)\n        .then(({data})=>{\n            let {rate:{remaining}}=data;\n            setRequests(remaining);\n            if(remaining === 0){\n                toggleError(true,'Sorry, You have exceeded your hourly rate limit !!')\n            }\n        }).catch(err=>{\n            \n        })\n    }\n\n    function toggleError(show = false,msg= ''){\n        setError({show,msg})\n    };\n\n    useEffect(checkRequests,[])\n    return(\n    <GithubContext.Provider \n    value={{gitHubUser,searchGithubUser,repos,followers,requests,error,isLoading}}>\n        {children}\n    </GithubContext.Provider>\n    )\n}\n\nexport {GithubProvider,GithubContext}"]},"metadata":{},"sourceType":"module"}